// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================
// Pure functions for use throughout the codebase

@use "sass:color";
@use "sass:math";
@use "sass:map";

// ============================================================================
// COLOR FUNCTIONS
// ============================================================================

/// Lightens a color by a percentage
/// @param {Color} $color - The color to lighten
/// @param {Number} $amount - Percentage to lighten (0-100)
/// @return {Color} - Lightened color
@function lighten-color($color, $amount) {
  @return color.adjust($color, $lightness: $amount * 1%);
}

/// Darkens a color by a percentage
/// @param {Color} $color - The color to darken
/// @param {Number} $amount - Percentage to darken (0-100)
/// @return {Color} - Darkened color
@function darken-color($color, $amount) {
  @return color.adjust($color, $lightness: -$amount * 1%);
}

/// Creates a transparent version of a color
/// @param {Color} $color - The color to make transparent
/// @param {Number} $alpha - Opacity (0-1)
/// @return {Color} - Color with alpha
@function alpha-color($color, $alpha) {
  @return rgba($color, $alpha);
}

/// Mixes two colors together
/// @param {Color} $color1 - First color
/// @param {Color} $color2 - Second color
/// @param {Number} $weight - Weight of first color (0-100)
/// @return {Color} - Mixed color
@function mix-colors($color1, $color2, $weight: 50) {
  @return color.mix($color1, $color2, $weight * 1%);
}

// ============================================================================
// SPACING FUNCTIONS
// ============================================================================

/// Multiplies a spacing value
/// @param {Number} $space - Base spacing value
/// @param {Number} $multiplier - Multiplier
/// @return {Number} - Calculated spacing
@function space($multiplier: 1) {
  $base: 0.5rem; // 8px
  @return $base * $multiplier;
}

// ============================================================================
// TYPOGRAPHY FUNCTIONS
// ============================================================================

/// Calculates line height from font size
/// @param {Number} $font-size - Font size
/// @param {Number} $line-height - Desired line height
/// @return {Number} - Unitless line height ratio
@function line-height-from-size($font-size, $line-height) {
  @return math.div($line-height, $font-size);
}

/// Converts px to rem
/// @param {Number} $px - Pixel value
/// @param {Number} $base - Base font size (default 16px)
/// @return {Number} - Rem value
@function px-to-rem($px, $base: 16) {
  @return math.div($px, $base) * 1rem;
}

// ============================================================================
// MAP FUNCTIONS
// ============================================================================

/// Safely gets a value from a nested map
/// @param {Map} $map - The map to search
/// @param {Arglist} $keys - Keys to traverse
/// @return {*} - Value or null
@function map-deep-get($map, $keys...) {
  @each $key in $keys {
    @if type-of($map) != "map" {
      @return null;
    }
    $map: map.get($map, $key);
  }
  @return $map;
}
